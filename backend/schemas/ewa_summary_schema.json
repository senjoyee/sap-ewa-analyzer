{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/schemas/god_level_ewa_analysis/v1.1.json",
  "title": "GodLevelEWAAnalysis",
  "description": "Structured, actionable analysis of an SAP EarlyWatch Alert report.",
  "type": "object",
  "properties": {
    "Schema Version": {
      "type": "string",
      "const": "1.1"
    },

    "System Metadata": {
      "type": "object",
      "required": ["System ID", "Report Date", "Analysis Period"],
      "properties": {
        "System ID": {
          "type": "string",
          "description": "The SAP System ID (SID)."
        },
        "Report Date": {
          "type": "string",
          "format": "date",
          "description": "Date the EWA report was generated."
        },
        "Analysis Period": {
          "type": "string",
          "description": "Date range the report covers (e.g. 2024-05-01 / 2024-05-31)."
        }
      }
    },

    "Chapters Reviewed": {
      "type": "array",
      "description": "List of all chapters/sections found and reviewed in the EWA document.",
      "items": {
        "type": "string"
      }
    },

    "System Health Overview": {
      "type": "object",
      "properties": {
        "Performance": { "type": "string", "enum": ["good", "fair", "poor"] },
        "Security":    { "type": "string", "enum": ["good", "fair", "poor"] },
        "Stability":   { "type": "string", "enum": ["good", "fair", "poor"] },
        "configuration": { "type": "string", "enum": ["good", "fair", "poor"] }
      },
      "required": ["Performance", "Security", "Stability", "configuration"]
    },

    "Executive Summary": {
      "type": "string",
      "description": "Concise bullet-point summary for a C-level audience."
    },

    "Positive Findings": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["Area", "Description"],
        "properties": {
          "Area":        { "type": "string" },
          "Description": { "type": "string" }
        }
      }
    },

    "Key Findings": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["Issue ID", "Area", "Finding", "Impact", "Business impact", "Severity", "Source"],
        "properties": {
          "Issue ID": {
            "type": "string",
            "pattern": "^KF-[0-9]{2}$",
            "description": "Unique key finding identifier."
          },
          "Area":            { "type": "string", "description": "Exact Topic text from Check Overview." },
          "Finding":         { "type": "string" },
          "Impact":          { "type": "string", "description": "Potential technical impact." },
          "Business impact": { "type": "string", "description": "Translated business risk." },
          "Severity":        { "type": "string", "enum": ["medium", "high"] },
          "Source":          { "type": "string", "description": "Report section or evidence supporting the finding." }
        }
      }
    },

    "Recommendations": {
      "type": "array",
      "description": "Detailed, actionable recommendations.",
      "items": {
        "type": "object",
        "required": [
          "Recommendation ID",
          "Estimated Effort",
          "Responsible Area",
          "Linked issue ID",
          "Action",
          "Preventative Action"
        ],
        "properties": {
          "Recommendation ID": {
            "type": "string",
            "pattern": "^REC-[0-9]{2}$"
          },


          "Estimated Effort": {
            "type": "object",
            "required": ["analysis", "implementation"],
            "properties": {
              "analysis":      { "type": "string", "enum": ["low", "medium", "high"] },
              "implementation":{ "type": "string", "enum": ["low", "medium", "high"] }
            }
          },

          "Responsible Area": { "type": "string", "enum": [
              "SAP Basis Team",
              "Database Administration",
              "Operating System Administration",
              "Network & Connectivity",
              "Security / Compliance Team",
              "Application Development",
              "Functional / Business Process Owner",
              "Infrastructure / Hardware Team",
              "Third-Party Vendor",
              "Project / Change Management"
            ] },
          "Linked issue ID": {
            "type": "string",
            "pattern": "^KF-[0-9]{2}$",
            "description": "Key finding this recommendation addresses."
          },
          "Action":             { "type": "string", "description": "Specific steps to execute." },
          "Preventative Action":{ "type": "string", "description": "Measure to prevent recurrence." }
        }
      }
    },




    "Capacity Outlook": {
      "type": "object",
      "properties": {
        "Database Growth":   { "type": "string" },
        "CPU Utilization":   { "type": "string" },
        "Memory Utilization":{ "type": "string" },
        "Summary":           { "type": "string" }
      },
      "required": ["Database Growth", "CPU Utilization", "Memory Utilization", "Summary"]
    },


    "Overall Risk": {
      "type": "string",
      "enum": ["low", "medium", "high"]
    }
  },

  "required": [
    "Schema Version",
    "System Metadata",
    "Chapters Reviewed",
    "Executive Summary",
    "System Health Overview",
    "Positive Findings",
    "Key Findings",
    "Recommendations",
    "Capacity Outlook",
    "Overall Risk"
  ]


}