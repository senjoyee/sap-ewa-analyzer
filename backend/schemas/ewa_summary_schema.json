{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/schemas/god_level_ewa_analysis/v1.1.json",
  "title": "GodLevelEWAAnalysis",
  "description": "Structured, actionable analysis of an SAP EarlyWatch Alert report.",
  "type": "object",
  "properties": {
    "Schema Version": {
      "type": "string",
      "const": "1.1"
    },

    "System Metadata": {
      "type": "object",
      "required": ["System ID", "Report Date", "Analysis Period"],
      "properties": {
        "System ID": {
          "type": "string",
          "description": "The SAP System ID (SID)."
        },
        "Report Date": {
          "type": "string",
          "format": "date",
          "description": "Date the EWA report was generated."
        },
        "Analysis Period": {
          "type": "string",
          "description": "Date range the report covers (e.g. 2024-05-01 / 2024-05-31)."
        }
      }
    },

    "System Health Overview": {
      "type": "object",
      "properties": {
        "Performance": { "type": "string", "enum": ["good", "fair", "poor"] },
        "Security":    { "type": "string", "enum": ["good", "fair", "poor"] },
        "Stability":   { "type": "string", "enum": ["good", "fair", "poor"] },
        "configuration": { "type": "string", "enum": ["good", "fair", "poor"] }
      }
    },

    "Executive Summary": {
      "type": "string",
      "description": "Concise bullet-point summary for a C-level audience."
    },

    "Positive Findings": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["Area", "Description"],
        "properties": {
          "Area":        { "type": "string" },
          "Description": { "type": "string" }
        }
      }
    },

    "Key Findings": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["Issue ID", "Area", "Finding", "Impact", "Business impact", "Severity"],
        "properties": {
          "Issue ID": {
            "type": "string",
            "pattern": "^KF-[0-9]{2}$",
            "description": "Unique key finding identifier."
          },
          "Area":            { "type": "string", "enum": [
              "Hardware",
              "Operating System",
              "Database",
              "SAP Kernel / Basis",
              "ABAP Stack",
              "Java Stack",
              "SAP HANA",
              "Performance & Workload",
              "Security & Compliance",
              "Configuration & House-keeping",
              "Interfaces / Connectivity",
              "Backup & Recovery",
              "Upgrade / Patch Management",
              "Capacity & Sizing"
            ] },
          "Finding":         { "type": "string" },
          "Impact":          { "type": "string", "description": "Potential technical impact." },
          "Business impact": { "type": "string", "description": "Translated business risk." },
          "Severity":        { "type": "string", "enum": ["low", "medium", "high", "critical"] }
        }
      }
    },

    "Recommendations": {
      "type": "array",
      "description": "Detailed, actionable recommendations.",
      "items": {
        "type": "object",
        "required": [
          "Recommendation ID",
          "Estimated Effort",
          "Responsible Area",
          "Action",
          "Preventative Action"
        ],
        "properties": {
          "Recommendation ID": {
            "type": "string",
            "pattern": "^REC-[0-9]{2}$"
          },


          "Estimated Effort": {
            "type": "object",
            "required": ["analysis", "implementation"],
            "properties": {
              "analysis":      { "type": "string", "enum": ["low", "medium", "high"] },
              "implementation":{ "type": "string", "enum": ["low", "medium", "high"] }
            }
          },

          "Responsible Area": { "type": "string", "enum": [
              "SAP Basis Team",
              "Database Administration",
              "Operating System Administration",
              "Network & Connectivity",
              "Security / Compliance Team",
              "Application Development",
              "Functional / Business Process Owner",
              "Infrastructure / Hardware Team",
              "Third-Party Vendor",
              "Project / Change Management"
            ] },
          "Linked issue ID": {
            "type": "string",
            "pattern": "^KF-[0-9]{2}$",
            "description": "Key finding this recommendation addresses."
          },
          "Action":             { "type": "string", "description": "Specific steps to execute." },
          "Preventative Action":{ "type": "string", "description": "Measure to prevent recurrence." }
        }
      }
    },

    "Parameters": {
      "type": "array",
      "description": "Relevant SAP profile parameters.",
      "items": {
        "type": "object",
        "required": ["Name", "Area", "Current Value", "Recommended Value", "Description"],
        "properties": {
          "Name":              { "type": "string" },
          "Area":              { "type": "string" },
          "Current Value":     { "type": "string" },
          "Recommended Value": { "type": "string" },
          "Description":       { "type": "string" }
        }
      }
    },


    "KPIs": {
      "type": "array",
      "description": "A list of key performance indicators (KPIs) with current values, targets, and trend information.",
      "items": {
        "type": "object",
        "required": ["name", "current_value", "trend"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the KPI (e.g., 'Database Response Time', 'CPU Utilization')"
          },
          "current_value": {
            "type": "string",
            "description": "Current value with units (e.g., '25ms', '85%', '2.3GB')"
          },
          "target_value": {
            "type": "string",
            "description": "Target or recommended value with units (optional)"
          },
          "trend": {
            "type": "object",
            "required": ["direction"],
            "properties": {
              "direction": {
                "type": "string",
                "enum": ["up", "down", "flat"],
                "description": "Trend direction compared to previous report"
              },
              "percent_change": {
                "type": "number",
                "description": "Percentage change from previous report (optional)"
              },
              "description": {
                "type": "string",
                "description": "Brief explanation of the trend (optional)"
              }
            }
          }
        }
      }
    },

    "capacity_outlook": {
      "type": "object",
      "properties": {
        "Database Growth":   { "type": "string" },
        "CPU Utilization":   { "type": "string" },
        "Memory Utilization":{ "type": "string" },
        "Summary":           { "type": "string" }
      }
    },



    "overall_risk": {
      "type": "string",
      "enum": ["low", "medium", "high", "critical"]
    }
  },

  "required": [
    "schema_version",
    "system_metadata",
    "executive_summary",
    "system_health_overview",
    "positive_findings",
    "key_findings",
    "recommendations",
    "parameters",
    "kpis",
    "capacity_outlook",
    "overall_risk"
  ]


}